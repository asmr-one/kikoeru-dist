(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"9ad9":function(t,o,e){"use strict";e.r(o);var r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("q-card",{staticClass:"q-ma-md"},[e("q-form",{on:{submit:t.onSubmitRootFolder}},[e("q-toolbar",[e("q-toolbar-title",[t._v("添加新文件夹")])],1),e("div",{staticClass:"q-pa-sm"},[e("q-input",{attrs:{outlined:"",dense:"",required:"","lazy-rules":"",rules:[function(o){return!t.config.rootFolders.find((function(t){return t.name===o}))||"该别名已存在，文件夹别名不能重复"}],label:"文件夹别名"},model:{value:t.rootFolder.name,callback:function(o){t.$set(t.rootFolder,"name",o)},expression:"rootFolder.name"}}),e("q-input",{attrs:{outlined:"",dense:"",required:"","lazy-rules":"",rules:[function(o){return!t.config.rootFolders.find((function(t){return t.path===o}))||"该路径已存在，文件夹路径不能重复"}],label:"绝对路径"},model:{value:t.rootFolder.path,callback:function(o){t.$set(t.rootFolder,"path",o)},expression:"rootFolder.path"}}),e("div",{staticClass:"row justify-end"},[e("q-btn",{attrs:{type:"submit",color:"primary",label:"添加"}})],1)],1)],1)],1),e("q-form",{on:{submit:t.onSubmit}},[e("q-card",{directives:[{name:"show",rawName:"v-show",value:t.config.rootFolders.length,expression:"config.rootFolders.length"}],staticClass:"q-ma-md"},[e("q-toolbar",[e("q-toolbar-title",[t._v("文件夹列表")])],1),e("q-list",t._l(t.config.rootFolders,(function(o){return e("q-item",{key:o.name},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{color:"amber",name:"folder"}})],1),e("q-item-section",[e("q-item-label",[t._v(t._s(o.name))]),e("q-item-label",{attrs:{caption:""}},[t._v(t._s(o.path))])],1),e("q-item-section",{attrs:{avatar:""}},[e("q-btn",{attrs:{flat:"",round:"",color:"red",icon:"delete"},on:{click:function(o){return t.removeFromRootFolders(t.index)}}})],1)],1)})),1)],1),e("q-card",{staticClass:"q-ma-md"},[e("q-toolbar",[e("q-toolbar-title",[t._v("封面文件夹路径")])],1),t.config.coverUseDefaultPath?e("div",{staticClass:"q-pa-md"},[t._v("已指定为默认路径，即程序所在位置下的covers文件夹。如需修改，请前往高级设置并取消“封面使用默认路径”。")]):e("q-input",{staticClass:"q-pa-sm",attrs:{outlined:"",dense:"",required:""},model:{value:t.config.coverFolderDir,callback:function(o){t.$set(t.config,"coverFolderDir",o)},expression:"config.coverFolderDir"}})],1),e("div",{staticClass:"q-ma-lg row justify-end"},[e("q-btn",{attrs:{loading:t.loading,label:"保存",type:"submit",color:"primary"}})],1)],1)],1)},s=[],a=e("2d97"),i={name:"Folders",mixins:[a["a"]],data(){return{config:{rootFolders:[]},rootFolder:{name:"",path:""},loading:!1}},methods:{requestConfig(){this.$axios.get("/api/config/admin").then(t=>{this.config=t.data.config,this.rootFolder.path=t.data.config.voiceWorkDefaultPath}).catch(t=>{t.response?401!==t.response.status&&this.showErrNotif(t.response.data.error||`${t.response.status} ${t.response.statusText}`):this.showErrNotif(t.message||t)})},onSubmit(){this.loading=!0,this.$axios.put("/api/config/admin",{config:this.config}).then(t=>{this.showSuccNotif(t.data.message),this.loading=!1}).catch(t=>{this.loading=!1,t.response?this.showErrNotif(t.response.data.error||`${t.response.status} ${t.response.statusText}`):this.showErrNotif(t.message||t)})},onSubmitRootFolder(){""!==this.rootFolder.name&&""!==this.rootFolder.path&&(this.config.rootFolders.push({name:this.rootFolder.name,path:this.rootFolder.path}),this.rootFolder.name="",this.rootFolder.path="",this.onSubmit())},removeFromRootFolders(t){this.config.rootFolders.splice(t,1),this.onSubmit()}},created(){this.requestConfig()}},n=i,l=e("2877"),c=e("f09f"),d=e("0378"),u=e("65c6"),m=e("6ac5"),h=e("27f9"),f=e("9c40"),p=e("1c1c"),q=e("66e5"),b=e("4074"),g=e("0016"),F=e("0170"),v=e("eebe"),w=e.n(v),x=Object(l["a"])(n,r,s,!1,null,null,null);o["default"]=x.exports;w()(x,"components",{QCard:c["a"],QForm:d["a"],QToolbar:u["a"],QToolbarTitle:m["a"],QInput:h["a"],QBtn:f["a"],QList:p["a"],QItem:q["a"],QItemSection:b["a"],QIcon:g["a"],QItemLabel:F["a"]})}}]);